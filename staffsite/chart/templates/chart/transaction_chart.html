{% extends "adminapp/base.html" %}
{% load staticfiles %}
{% block css %}
<link href="{% static "chart/css/bootstrap-datetimepicker.css" %}" rel="stylesheet">
<link href="http://cdnjs.cloudflare.com/ajax/libs/dc/1.7.0/dc.css" rel="stylesheet">
{% endblock css %}

{% block content %}
<input id="chart_api_url" type="hidden" value="{{ chart_api_url }}">
          <div class="container-fluid">
            <div class="row">
              <div class="col-lg-12">
                <div class="page-header">
                  <h2>Transaction Charts <small>Subtext for header</small></h2>
                </div>
              </div>
            </div>

            <div class="row">

              <div class="col-lg-9">

                <div class="row">

                  <div class="col-lg-6">
                    <div id="issuer-panel" class="panel panel-default" style="height: 250px; background: center no-repeat;">
                      <div class="row">
                        <div class="col-lg-12">
                          <h5 class="text-center">Issuer Distribution</h5>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-12">
                          <div id="issuer-chart">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-lg-6">
                    <div id="color-panel" class="panel panel-default" style="height: 250px; background: center no-repeat;">
                      <div class="row">
                        <div class="col-lg-12">
                          <h5 class="text-center">Color Distribution</h5>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-12">
                          <div id="color-chart">
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-12">
                    <div id="tx-amount-panel" class="panel panel-default" style="height: 250px; background: center no-repeat;">
                      <div class="row">
                        <div id="tx-amount-heading" class="col-lg-12">
                          <h5 class="text-center">Transaction Amount</h5>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-12">
                          <div id="tx-amount-chart"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-12">
                    <div id="tx-num-panel" class="panel panel-default" style="height: 250px; background: center no-repeat;">
                      <div class="row">
                        <div class="col-lg-12">
                          <h5 class="text-center">Transaction Num</h5>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-lg-12">
                          <div id="tx-num-chart"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-lg-3">
                <div class="panel panel-default">
                  <div>
                    <form method="POST">
                      <div id="qq" class="btn-group btn-group-justified" data-toggle="buttons">
                        <label id="day-btn" class="btn btn-default active">
                          <input type="radio" name="time_unit" autocomplete="off" checked> Day
                        </label>
                        <label id="month-btn" class="btn btn-default">
                          <input type="radio" name="time_unit" id="month-btn" autocomplete="off"> Month
                        </label>
                        <label id="year-btn" class="btn btn-default">
                          <input type="radio" name="time_unit" id="year-btn" autocomplete="off"> Year
                        </label>
                      </div>

                      <div class="form-group">
                          <label>Date</label>
                          <div class="input-group date" id="day-picker">
                            <input id="day" type="text" class="form-control">
                            <span class="input-group-addon"><span class="glyphicon-calendar glyphicon"></span></span>
                          </div>
                          <div class="input-group date " id="month-picker">
                            <input id="month" type="text" class="form-control">
                            <span class="input-group-addon"><span class="glyphicon-calendar glyphicon"></span></span>
                          </div>
                          <div class="input-group date " id="year-picker">
                            <input id="year" type="text" class="form-control">
                            <span class="input-group-addon"><span class="glyphicon-calendar glyphicon"></span></span>
                          </div>
                      </div>

                      <div class="form-group">
                        <div>
                        <label>Issuer Filter:</label>
                        </div>
                        <div>
                          <a href="#" data-toggle="collapse" data-target="#color_filter" aria-expanded="false" aria-controls="color_filter">
                          show all
                          </a>
                        </div>
                        <div id="color_filter" class="collapse">
                          <ul class="list-unstyled">
                            {% for issuer in issuers %}
                            <li><input type="checkbox" name="issuer_filter" value="{{issuer.name}}"> <label>{{ issuer.name }}</label></li>
                            {% endfor %}
                          </ul>
                        </div>
                      </div>

                      <div class="form-group">
                        <div>
                          <label>Color Filter</label>
                        </div>
                        <div>
                          <a href="#" data-toggle="collapse" data-target="#issuer_filter" aria-expanded="false" aria-controls="issuer_filter">
                          show all
                          </a>
                        </div>
                        <div id="issuer_filter" class="collapse" style="max-height:120px; overflow-y: auto;">
                          <ul class="list-unstyled">
                            {% for color in colors %}
                            <li><input type="checkbox" name="color_filter" value="{{color.color_name}}"> <label>{{ color.color_name }}</label></li>
                            {% endfor %}
                          </ul>
                        </div>
                        </div>
                      </div>
                      <div>
                          <input type="submit" class="btn btn-sm btn-primary">
                      </div>

                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        <!-- /#page-content-wrapper -->
        <div id="loader-img" class="hide" style="background: url('{% static "chart/img/ajax-loader.gif" %}');"></div>

    <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>

    {% endblock content %}
    {% block js %}
    <script src="{% static "chart/js/crossfilter.min.js" %}"></script>
    <script src="{% static "chart/js/d3.min.js" %}"></script>
    <script src="{% static "chart/js/dc.min.js" %}"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.js"></script>
    <script src="{% static "chart/js/bootstrap-datetimepicker.js" %}"></script>
    <script src="{% static "chart/js/statistics_api_client.js" %}"></script>
    <script src="{% static "chart/js/transaction_chart.js" %}"></script>
    <script src="{% static "chart/js/time_obj.js" %}"></script>
    {% endblock js %}

